{% load i18n %}

<div id="resourceList">
{% for item in list %}
  <li>
    <div class="resultImgWrapper resultImgWrapperRs" style="text-align: center">
        <a href="{{ item.detail_url }}">
          <img src="{{ item.thumbnail_url }}"
            style="max-width: 150px; width: inherit" />
        </a>
    </div>
    <div class="description1"><a href="{{ item.detail_url }}">{{ item.title }}</a></div>
    <div class="description2" style="text-transform: capitalize;">{{ item.category__gn_description }}</div>
    <div class="description3">by <a href="/people/profile/{{ item.owner }}">{{ item.owner }}</a></div>

    {% if request.user.is_authenticated %}
    <div class="actions" data-id="{{item.id}}">
      <a href="#" class="queue-item" 
        data-url="{{item.detail_url}}" 
        data-id="{{item.id}}"
        data-title="{{item.title}}"
        data-thumbnail_url="{{item.thumbnail_url}}"
        data-owner="{{item.owner}}"><i class = "fa fa-plus-square"></i> add to queue</a>
      <a href="#" class="unqueue-item hidden" style="color: rgba(85, 85, 85, 0.34)">
        <i class = "fa fa-minus-circle" style="color: rgba(85, 85, 85, 0.34)"></i> added</a>
      <a href="#" class="download-item" data-url="{{item.detail_url}}" data-id="{{item.id}}"><i class = "fa fa-download"></i> download</a>
    </div>
    {% else %}
    <div class="actions" data-id="{{item.id}}">
      <a href="#" class="disabled" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;">
        <i class = "fa fa-plus-square" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;"></i> add to queue
      </a>
      <a href="#" class="disabled" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;">
        <i class = "fa fa-download" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;"></i> download
      </a>
    </div>
    {% endif %}
    <div class = "description4">
      <p>{{item.abstract}}</p>
    </div>		

  </li>
</div>
{% endfor %}
{% for item in list %}
<div id="resourceList">
  <li>
    <div class="resultImgWrapper resultImgWrapperRs" style="text-align: center">
        <a href="{{ item.detail_url }}">
          <img src="{{ item.thumbnail_url }}"
            style="max-width: 150px; width: inherit" />
        </a>
    </div>
    <div class="description1"><a href="{{ item.detail_url }}">{{ item.title }}</a></div>
    <div class="description2" style="text-transform: capitalize;">{{ item.category__gn_description }}</div>
    <div class="description3">by <a href="/people/profile/{{ item.owner }}">{{ item.owner }}</a></div>

    {% if request.user.is_authenticated %}
    <div class="actions" data-id="{{item.id}}">
      <a href="#" class="queue-item" 
        data-url="{{item.detail_url}}" 
        data-id="{{item.id}}"
        data-title="{{item.title}}"
        data-thumbnail_url="{{item.thumbnail_url}}"
        data-owner="{{item.owner}}"><i class = "fa fa-plus-square"></i> add to queue</a>
      <a href="#" class="unqueue-item hidden" style="color: rgba(85, 85, 85, 0.34)">
        <i class = "fa fa-minus-circle" style="color: rgba(85, 85, 85, 0.34)"></i> added</a>
      <a href="#" class="download-item" data-url="{{item.detail_url}}" data-id="{{item.id}}"><i class = "fa fa-download"></i> download</a>
    </div>
    {% else %}
    <div class="actions" data-id="{{item.id}}">
      <a href="#" class="disabled" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;">
        <i class = "fa fa-plus-square" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;"></i> add to queue
      </a>
      <a href="#" class="disabled" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;">
        <i class = "fa fa-download" style="color: rgba(85, 85, 85, 0.34);cursor: default;text-decoration: none;"></i> download
      </a>
    </div>
    {% endif %}
    <div class = "description4">
      <p>{{item.abstract}}</p>
    </div>		

  </li>
{% endfor %}
</div>
<div id="modalList">
{% for item in list %}
  <div class="modal fade" id="resource-download-{{ item.id }}" tabindex="-1" role="dialog" aria-labelledby="ResDownloadModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="width: 80%; height: 60%;">
    <div class="modal-content" style="height: auto; min-height: 100%; border-radius: 0;">
      <div class="modal-header">
      <h4 class="modal-title" id="ResDownloadModalLabel">END-USER LICENSE AGREEMENT (Non-Commercial)</h4>
      </div>
      <div class="modal-body">
      <div class="row edit-modal">
        <div class="col-sm-12 text-left">
        {% include "parmap_data_request/eula.html" %}
        </div>
      </div>
      </div>
      <div class="modal-footer">
        <input type="button" class="btn btn-default" data-toggle="modal" data-target="#download-layer-{{ item.id }}" data-dismiss="modal" value="{% trans "Accept" %}"/>
      <input type="button" class="btn btn-default" data-dismiss="modal" value="{% trans "Close" %}"/>
      </div>
    </div>
    </div>
  </div>

  <div class="modal fade" id="download-layer-{{ item.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      {% if facettype == "layers" %}
        <h4 class="modal-title" id="myModalLabel">{% trans "Download Layer" %}</h4>
      {% else %}
        <h4 class="modal-title" id="myModalLabel">{% trans "Download Map" %}</h4>
      {% endif %}
      </div>
      <div class="modal-body parmap-download-list parmap-download-list-{{ item.id }}" data-url="{{item.detail_url}}" >
        {% if facettype == "maps" %}
        <ul style="margin: 0; padding: 0">
          <li style="list-style: none">
            {% if resource.extension|lower in "jpg,jpeg" %}
              <a class="Downloadlink" data-type="JPEG" data-facet="map" href="/documents/{{ item.id }}/download/" target="_blank">JPEG</a>
            {% else %}
              <a class="Downloadlink" data-type="{{item.extension|upper}}" data-facet="map" href="/documents/{{ item.id }}/download/" target="_blank">{{item.extension|upper}}</a>
            {% endif %}
          </li>
        </ul>
        {% endif %}
      </div>
      <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Close" %}</button>
      </div>
    </div>
    </div>
  </div>
{% endfor %}
</div>