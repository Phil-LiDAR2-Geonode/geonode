{% load i18n %}

<div class="section firstChild backToTop" ng-controller="CartList">
  <div class = "container">
      <div class = "row">
        <div class = "col-sm-3 filterWrapper">
          <div class = "filterHeader">
            <span>Filters</span>
            <a href="#" ng-click="clearSearch()" class="pull-right">Clear</a>
          </div>
          <div class = "filterForm">
            {% include "search/_general_filters.html" %}

            {% if SEARCH_FILTERS.EXTENT_ENABLED and facet_type == 'layers' %}      
                {% include "search/_extent_filter.html" %}
            {% endif %}
          </div>
        </div>
        <div class="col-sm-9 rightPanel">
          <div ng-if="hasNoFilter === true">
              <p>PARMap uses a multi-level approach in mapping agricultural and coastal land cover.</p>
              <p>Using LiDAR and other remotely-sensed data, detailed crop mapping is carried out through object-based image analysis and support vector machine. These data underwent refinement, schema implementation, integration, then produced into GIS files. </p>
              <p>To know more about the mapping design, click <a href = "javascript:;">here</a>. <br>
              To know more about the land use/land cover classification, click <a href = "javascript:;">here</a>.</p>
              
              {% if facet_type == 'layers' %}
                <div class = "rightMapWrapper" id = "mainMapView"></div>
              {% endif %}

              {% if facet_type == 'documents' %}
              <div class = "resultWrapper">
                <div class="resultTitle">Recently Added:</div>
                {% verbatim %}
                <ul>
                    <li ng-repeat="item in results | limitTo:3" resource_id="{{ item.id }}" ng-cloak class="ng-cloak">
                      <div class="resultImgWrapper">
                        <a href="{{ item.detail_url }}"><img ng-src="{{ item.thumbnail_url }}" /></a>
                      </div>
                      <div class="description1"><a href="{{ item.detail_url }}">{{ item.title }}</a></div>
                      <div class="description2" style="text-transform: capitalize;">{{ item.locationsLabel }}</div>
                      <div class="description3">by <a href="/people/profile/{{ item.owner__username }}">{{ item.owner__username }}</a></div>
                    </li>
                </ul>
                {% endverbatim %}
              </div>
              {% endif %}
          </div>
          <div ng-if="hasNoFilter !== true">
            {% include 'base/_resourcebase_snippet.html' %}
          </div>
        </div>
      </div>
    </div>
</div>

<div class="row" ng-controller="CartList" ng-if="false">
  <div class="col-md-3">
    <!-- <resource-cart></resource-cart> -->
    <div class="row">
      <div class="col-xs-12">
        {% block bulk_perms_button %}
        <div class="btn-group btn-group-justified" role="group" aria-label="tools">
          {% if request.user.is_authenticated and False %}
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-default" ng-disabled="!cart.getCart().items.length" data-toggle="modal" data-target="#_bulk_permissions">Set Permissions</button>
          </div>
          {% endif %}
          {% if facet_type == 'layers' and False %}
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-default" ng-disabled="!cart.getCart().items.length" ng-click="newMap()">{% trans "Create a map" %}</button>
          </div>
          {% endif %}
        </div>
        {% endblock %}
    
        <div class="selections">
            {% trans "Filters" %}
            <a href="." id="clear-search" class="pull-right">{% trans "Clear" %}</a>
        </div>
            {% if SEARCH_FILTERS.TEXT_ENABLED %}
              {% include "search/_text_filter.html" %}
            {% endif  %}
        <div id="slide-pane">
            {% if request.user.is_authenticated and user.is_active and user.is_superuser and False %}
              {% if SEARCH_FILTERS.TYPE_ENABLED and include_type_filter == 'true' %}
              {% include "search/_type_filters.html" %}
              {% endif %}
            {% endif %}

            {% include "search/_general_filters.html" %}
            {% if SEARCH_FILTERS.REGION_ENABLED %}
              {% include "search/_region_filter.html" %}
            {% endif %}
            {% if SEARCH_FILTERS.EXTENT_ENABLED %}
              {% include "search/_extent_filter.html" %}
            {% endif %}
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-9">
    <div class="col-md-2">
      <span>Results:</span>
      <!-- <span ng-bind="total_counts"></span> -->
    </div>
    <!-- {% include "search/_sort_filters.html" %} -->
    <div class="col-md-12 grid-spacer">
    {% include 'base/_resourcebase_snippet.html' %}
    {% include 'search/_pagination.html' %}
    </div>
  </div>
  {% include "_bulk_permissions_form.html" %}
</div>
