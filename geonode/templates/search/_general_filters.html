{% load i18n %}

{% if SEARCH_FILTERS.LOCATIONS_ENABLED and map_type == "lulc" %}
<form ng-submit="location_submit(selectedProvince, selectedMunicipality)">
  <label>Province</label>
  <select name="mySelect" id="myProvinceSelect"
    class="nav closed form-control"
    ng-options="location.name for location in locations | orderBy: 'code' track by location.code"
    ng-model="selectedProvince"
    required></select>

  <label>Municipality</label>
  <select name="mySelect" id="myMunicipalitySelect"
    class="nav closed form-control"
    ng-options="municipality.name for municipality in selectedProvince.municipality | orderBy: 'name' track by municipality.code"
    ng-model="selectedMunicipality"
    required></select>

  <button type="submit" class="btn pull-right" ng-disabled="selectedProvince && selectedMunicipality">Search</button>
</form>
<div class = "clearfix"></div><br><br>
{% endif %}

{% if map_type == "va" %}
<form ng-submit="filters_submit(selectedHazard, selectedScale)">
  <label>Hazard</label>
  <select name="mySelect" id="myHazardSelect"
    class="nav closed form-control"
    ng-options="hazard.label for hazard in hazards | orderBy: 'filter' track by hazard.filter"
    ng-model="selectedHazard"
    required></select>

  <label>Scale</label>
  <select name="mySelect" id="myScaleSelect"
    class="nav closed form-control"
    ng-options="scale.label for scale in scales | orderBy: 'filter' track by scale.filter"
    ng-model="selectedHazard"
    required></select>

  <button type="submit" class="btn pull-right" ng-disabled="selectedHazard && selectedHazard">Search</button>
</form>
<div class = "clearfix"></div><br><br>
{% endif %}

{% if SEARCH_FILTERS.CATEGORIES_ENABLED %}
<nav class="filter">
  <h4><a href="#" class="toggle toggle-nav"><i class="fa fa-chevron-right"></i>{% trans "Categories" %}</a></h4>
  <ul class="nav closed" id="categories">
    {% verbatim %}
      <li ng-repeat="category in categories" ng-if="category.count > 0">
        <a data-value="{{ category.identifier }}" data-filter="category__identifier__in"
         ng-click="multiple_choice_listener($event)" class="{{category.active}}">{{ category.gn_description | limitTo: 25 }}{{ category.gn_description.length > 25 ? '...' : ''}}
          <span class="badge pull-right">{{ category.count }}</span>
        </a>
      </li>
    {% endverbatim %}
  </ul>
</nav>
{% endif %}
{% if SEARCH_FILTERS.KEYWORDS_ENABLED %}
<nav class="filter">
  <h4><a href="#" class="toggle toggle-nav"><i class="fa fa-chevron-right"></i> {% trans "Keywords" %}</a></h4>
  <ul class="nav closed" id="keywords">
    {% verbatim %}
      <li ng-repeat="keyword in keywords" ng-if="keyword.count > 0">
        <a data-value="{{ keyword.slug }}" data-filter="keywords__slug__in" ng-click="multiple_choice_listener($event)" class="{{keyword.active}}">{{ keyword.name }}
          <span class="badge pull-right">{{ keyword.count }}</span>
        </a>
      </li>
    {% endverbatim %}
  </ul>
</nav>
{% endif %}
{% if SEARCH_FILTERS.OWNERS_ENABLED %}
<nav class="filter">
  <h4><a href="#" class="toggle toggle-nav"><i class="fa fa-chevron-right"></i> {% trans "Owners" %}</a></h4>
  <ul class="nav closed" id="owners">
    {% verbatim %}
    <li ng-repeat="owner in owners" ng-if="owner.count > 0">
      <a data-value="{{ owner.username }}" data-filter="owner__username__in" ng-click="multiple_choice_listener($event)" class="{{owner.active}}">{{ owner.username }}
        <span class="badge pull-right">{{ owner.count }}</span>
      </a>
    </li>
    {% endverbatim %}
  </ul>
</nav>
{% endif %}
{% if SEARCH_FILTERS.DATE_ENABLED %}
<nav class="filter">
  <h4><a href="#" class="toggle toggle-nav"><i class="fa fa-chevron-right"></i>{% trans "Date" %}</a></h4>
  <ul class="nav closed" id="date_start">
    <label>{% trans "Date begins after:" %}</label>
    <li><input value="yyyy-mm-dd" data-date-format="YYYY-MM-DD" type="text" class="datepicker" placeholder="{% trans 'yyyy-mm-dd' %}" ng-model="date_query.date__gte" /></li>
  </ul>
  <ul class="nav closed" id="date_end">
    <label>{% trans "Date ends before:" %}</label>
    <li><input value="yyyy-mm-dd" data-date-format="YYYY-MM-DD" type="text" class="datepicker" placeholder="{% trans 'yyyy-mm-dd' %}" ng-model="date_query.date__lte" /></li>
  </ul>
</nav>
{% endif %}
